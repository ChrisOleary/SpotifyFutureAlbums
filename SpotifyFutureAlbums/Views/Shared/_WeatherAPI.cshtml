@model SpotifyFutureAlbums.ViewModels.AllAPIDetails
<style>
    #apiDiv {
        padding-left: 20px;
    }

        /*#apiDiv select, #apiDiv button {
                        font-size: 25px;
                    }*/

        #apiDiv h4 {
            margin: 10px 0;
        }

        #apiDiv #message table {
            width: 100%;
            /*border: double 1px #00ffff;*/
            /*background: #ff6a00;*/
        }

            #apiDiv #message table th {
                text-align: left;
                /*background: #4CAF50;*/
            }
</style>
@*Weather API*@
<section class="page-section" id="team">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <h2 class="section-heading text-uppercase"><i class="fas fa-cloud-sun-rain" style="color:deepskyblue"></i> Weather Forecast<i class="fas fa-cloud-sun-rain" style="color:deepskyblue"></i></h2>
                <div>
                    <strong>City Name: </strong><input id="txtCity" type="text" />
                    <br />
                    <br />
                    <button class="btn btn-info" id="btnSubmit">Get Weather Forecast</button>
                </div>
                <div>
                    <table class="table table-bordered table-striped">
                        <tr>
                            <td>Weather Symbol Icon <img id="imgWeatherIconUrl" src="" title="Weather Icon" /></td>
                        </tr>
                        <tr>
                            <td>
                                <strong>City: </strong>
                                <span id="lblCity"></span>  ,
                                <span id="lblCountry"></span>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <strong>Latitude: </strong>
                                <label id="lblLat"></label><br />
                                <strong>Longitude: </strong>
                                <label id="lblLon"></label>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <strong>Description:</strong>
                                <label id="lblDescription"></label><br />
                                <strong>Humidity:</strong>
                                <label id="lblHumidity"></label>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Temperature (Feels Like)<label id="lblTempFeelsLike"></label><br />
                                Temperature <label id="lblTemp"></label><br />
                                Temperature (Min)<label id="lblTempMin"></label><br />
                                Temperature (Max)<label id="lblTempMax"></label><br />
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
</section>

<script>

    $("#btnSubmit").click(function () {

        var cityname = $("#txtCity").val();
        if (cityname.length > 0) {
            $.ajax({
                url: "http://localhost:52189/Home/WeatherDetail?City=" + cityname,
                type: "POST",
                success: function (rsltval) {
                    var data = JSON.parse(rsltval);
                    console.log(data);
                    $("#lblCity").html(data.City);
                    $("#lblCountry").text(data.Country);
                    $("#lblLat").text(data.Lat);
                    $("#lblLon").text(data.Lon);
                    $("#lblDescription").text(data.Description);
                    $("#lblHumidity").text(data.Humidity);
                    $("#lblTempFeelsLike").text(data.TempFeelsLike);
                    $("#lblTemp").text(data.Temp);
                    $("#lblTempMax").text(data.TempMax);
                    $("#lblTempMin").text(data.TempMin);
                    $("#imgWeatherIconUrl").attr("src", "http://openweathermap.org/img/w/" + data.WeatherIcon + ".png");
                    //data - response from server
                },
                error: function () {

                }
            });
        }
        else {
            alert("City Not Found");
        }
    });

</script>


